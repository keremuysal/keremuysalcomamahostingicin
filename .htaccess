RewriteEngine on
DirectoryIndex index.html

# HTTPS yönlendirme
RewriteCond %{HTTPS} on
RewriteCond %{HTTP:X-Forwarded-SSL} !on
RewriteCond %{HTTP_HOST} ^www\.keremuysal\.com$
RewriteRule ^/?$ "https\:\/\/keremuysal\.com\/" [R=301,L]

# .html uzantıları için yönlendirme
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]

RewriteEngine On
RewriteCond %{HTTP_HOST} ^a\.keremuysal\.com$ [NC]
RewriteRule ^(.*)$ /a/$1 [L]

# PHP handler ayarları
directoryIndex index.php

# 404 sayfası
ErrorDocument 404 /error/not-found.html

# php -- BEGIN cPanel-generated handler, do not edit
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit

# CSP Başlıkları Düzenlemesi
<IfModule mod_headers.c>
  # Content-Security-Policy başlığını doğru formatta ekle
  Header set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' https://keremuysal.com https://bylog.keremuysal.com https://1080872514.rsc.cdn77.org https://static.cloudflareinsights.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com https://cdn.jsdelivr.net; font-src 'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com https://cdn.jsdelivr.net; connect-src 'self' https://bylog.keremuysal.com https://bylog2.keremuysal.com; img-src * data: blob: https://hits.sh;"

  # Diğer güvenlik başlıkları
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set Referrer-Policy "no-referrer-when-downgrade"
  Header set X-XSS-Protection "1; mode=block"
</IfModule>
